---
title: 'Exercise #3'
author: "Frederik Borutta (10345490) / Felix Borutta (10049639)"
date: "`r Sys.Date()`"
output: distill::distill_article
bibliography: packages.bib
nocite: '@*'
---

```{r setup, include=FALSE}
options(repos = c(CRAN = "https://cran.rstudio.com/"))
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message=FALSE)
install.packages("distill")
install.packages("tidyverse", repos="http://cran.us.r-project.org")
library(tidyverse)

knitr::write_bib(c(.packages()), "packages.bib")
```

## Exercise 1: Initializing git (4 Points)

a) Start by initializing a new R project with git support, called 2025-exeRcise-sheet-3. If you forgot
how to do this, you can follow this guide.


b) Commit the files generated by Rstudio.


c) For all of the following tasks in this exercise sheet we ask you to always commit your changes after
finishing each subtask e.g. create a commit after task 1d, 1e etc.
Note: This applies only to answers that have text or code as their answer. If you complete tasks
in a different order or forget to commit one, this is no problem. If you change your answers you
can just create multiple commits to track the changes.


d) Name 2 strengths and 2 weaknesses of git. (Don’t forget to create a commit after this answer, see 1c)

Strenghts:
  * Good for collaboration in teams, with multiple developers/contributers.
  * Branching and multiple merging strategies are possible.

Weaknesses:
  * Could be complex in the beginning, for example solving merge conflicts or to get a linear log graph with rebase strategy.
  * Git is mainly used for source code version control. Large files, containing multimedia content or similiar big data structures, are not supported well by git.

e) Knit this exercise sheet. Some new files will automatically be generated when knitting the sheet e.g. the
HTML page. Ignore these files, as we only want to track the source files themselves. You can, but
don’t need to create a .gitignore file. Just do not commit these files manually.


## Exercise 2: Putting your Repository on GitHub (3 Points)


## Exercise 3: Pixar Films (4 Points)


## Exercise 4: Open Analysis (4 points)

c) 
* Dataset Name: Meat consumption in the USA (USDA, 2018)
* Link: https://github.com/owid/owid-datasets/tree/master/datasets/Meat%20consumption%20in%20the%20USA%20(USDA%2C%202018)

d) How is the red meat consumption chnaging in comparison to the total meat consumption? We believe it is interesting to see if the awareness of the relationship between climate change and red meat production is visible in the consumption pattern of US citizens.

e)
```{r rates}
d <- read_csv("task4_data.csv", show_col_types=FALSE)
diffs <- as.data.frame(lapply(d[,c("Per capita red meat consumption","Per capita total meat consumption")], diff, lag=1))
x <- cbind(d[0:-1,c("Year")], diffs)
colnames(x) <- c("year", "red_meat_diff", "total_diff")

cumsums <- cbind(x["year"], cumsum(x["red_meat_diff"]), cumsum(x["total_diff"]))
cumsums
```
It can be observed that the overall consumption for red meat changes positively in the sense that the consumption seemed to drop, whereas the total meat consumption increased.

f)

```{r lineplot, fig.cap="Annual changes in per capita meat consumption"}
ggplot(x, aes(x=year)) + 
  geom_line(aes(y = red_meat_diff, colour = "red meat")) + 
  geom_line(aes(y = total_diff, colour = "total")) +
  labs(
    title = "Annual changes in per meat capita consumption",
    subtitle = "From 1965 to 2018",
  ) +
  xlab("Year") +
  ylab("Changes in kg") +
  theme_light() +
  theme(plot.title=element_text(hjust = 0.5), plot.subtitle=element_text(hjust=0.5))
```

Figure @ref(fig:lineplot) shows the annual changes (unaggregated) in per capita meat consumption for red meat and for meat in general.